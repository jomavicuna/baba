---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allNotes = await getCollection('notes');
const recentNotes = allNotes
  .sort((a, b) => {
    const dateA = a.data.updated || a.data.created || new Date(0);
    const dateB = b.data.updated || b.data.created || new Date(0);
    return dateB.getTime() - dateA.getTime();
  })
  .slice(0, 10);
---

<BaseLayout title="Home">
  <h1>ðŸŒ± Digital Garden</h1>
  <p>Welcome to my digital garden. This is a collection of my notes and thoughts.</p>

  <h2>Recent Notes</h2>
  <ul>
    {recentNotes.map(note => (
      <li>
        <a href={`/notes/${note.id}`}>
          {note.data.title || note.id}
        </a>
      </li>
    ))}
  </ul>

  <p><a href="/notes">â†’ View all notes ({allNotes.length})</a></p>
</BaseLayout>
